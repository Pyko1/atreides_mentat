(this.webpackJsonpatreides_mentat=this.webpackJsonpatreides_mentat||[]).push([[0],{18:function(e,a,t){e.exports=t(38)},38:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(6),s=t.n(r),i=t(1),l=["harkonen","guild","emperor","bene","fremen"];function o(e){switch(e){case"bene":return"Bene Geserit";case"harkonen":return"Harkonen";case"fremen":return"Fremen";case"guild":return"Spacing Guild";case"emperor":return"The Emperor";default:return function(){throw new Error("Missing case in switch")}()}}var m=t(2),d=Object(m.a)("view/none"),u=Object(m.a)("view/edit_spice"),h=Object(m.a)("view/view_cards"),E=Object(m.a)("view/add_card"),f=Object(m.a)("view/reset"),v=Object(m.a)("houses/add_card",(function(e,a){return{payload:{house:e,card:a}}})),b=Object(m.a)("houses/remove_card",(function(e,a){return{payload:{house:e,index:a}}})),N=Object(m.a)("houses/modify_spice",(function(e,a){if(!Number.isInteger(a))throw new Error("Spice value must be an integer");return{payload:{house:e,spice:a}}})),p=Object(m.a)("houses/toggle_karama"),k=Object(m.a)("game/start"),g=Object(m.a)("game/reset"),w=t(9),y=function(e){var a=Object(i.b)(),t=n.useState(1),c=Object(w.a)(t,2),r=c[0],s=c[1],l=function(){a(d())};return n.createElement("div",{className:"modal is-active"},n.createElement("div",{className:"modal-background",onClick:l}),n.createElement("div",{className:"modal-card"},n.createElement("header",{className:"modal-card-head"},n.createElement("p",{className:"modal-card-title"},o(e.house)),n.createElement("button",{className:"delete",onClick:l})),n.createElement("section",{className:"modal-card-body"},n.createElement("div",{className:"level"},n.createElement("div",{className:"level-item has-text-centered"},n.createElement("div",null,n.createElement("p",{className:"heading"},"Spice"),n.createElement("p",{className:"title"},e.spice)))),n.createElement("div",{className:"field"},n.createElement("input",{className:"input",type:"number",value:r,onChange:function(e){s(parseInt(e.currentTarget.value))},step:1,min:1})),n.createElement("div",{className:"columns"},n.createElement("div",{className:"column is-half"},n.createElement("button",{className:"button is-success is-fullwidth",onClick:function(){a(N(e.house,r)),s(1)}},"Increase")),n.createElement("div",{className:"column is-half"},n.createElement("button",{className:"button is-danger is-fullwidth",onClick:function(){a(N(e.house,-r)),s(1)}},"Decrease"))))))},C=function(e){var a=Object(i.b)();return n.createElement("div",{className:"column is-half"},n.createElement("div",{className:"box"},n.createElement("h2",{className:"title is-3 has-text-centered"},o(e.house)),n.createElement("div",{className:"columns is-multiline"},n.createElement("div",{className:"column is-half"},n.createElement("button",{className:"button is-warning is-fullwidth",onClick:function(){return a(u(e.house))}},e.spice," spice")),n.createElement("div",{className:"column is-half"},n.createElement("button",{className:"button is-info is-fullwidth",onClick:function(){return a(h(e.house))}},e.cards.length," card",1===e.cards.length?"":"s")),n.createElement("div",{className:"column is-half"},n.createElement("button",{className:"button is-success is-fullwidth"+(e.karama_used?" is-inverted":""),onClick:function(){return a(p(e.house))}},"Karama ",e.karama_used?"used":"available")))))},_={DEFENSE:{text:"white",bg:"link"},SPECIAL:{text:"white",bg:"info"},USELESS:{text:"black",bg:"warning"},WEAPON:{text:"white",bg:"danger"},UNKNOWN:{text:"white",bg:"black"}},O=function(e){var a=_[e.card.kind],t="";switch(e.card.kind){case"UNKNOWN":t="???";break;case"USELESS":t="This card has no effect";break;default:t=e.card.type}return n.createElement("div",{className:"message has-text-centered"},n.createElement("header",{className:"message-header has-background-"+a.bg},n.createElement("p",{className:"card-header-title has-text-"+a.text},e.card.kind),e.onDelete?n.createElement("button",{className:"delete",onClick:e.onDelete}):null),n.createElement("div",{className:"message-body"},n.createElement("p",null,t)))},S=function(e){var a=Object(i.b)(),t=function(){return a(d())},c=e.cards.length<4;return"harkonen"===e.house&&(c=e.cards.length<8),n.createElement("div",{className:"modal is-active"},n.createElement("div",{className:"modal-background",onClick:t}),n.createElement("div",{className:"modal-card"},n.createElement("header",{className:"modal-card-head"},n.createElement("p",{className:"modal-card-title"},"Cards for ",o(e.house)),n.createElement("button",{className:"delete",onClick:t})),n.createElement("section",{className:"modal-card-body"},n.createElement("div",{className:"columns is-multiline"},e.cards.map((function(t,c){return n.createElement("div",{className:"column is-half"},n.createElement(O,{card:t,onDelete:function(){return a(b(e.house,c))}}))})))),n.createElement("footer",{className:"modal-card-foot"},n.createElement("button",{className:"button is-primary is-fullwidth",onClick:function(){c&&a(E(e.house))},disabled:!c},"Add card"))))},j=[{kind:"WEAPON",type:"Poison"},{kind:"WEAPON",type:"Projectile"},{kind:"WEAPON",type:"Lasgun"},{kind:"DEFENSE",type:"Shield"},{kind:"DEFENSE",type:"Snooper"},{kind:"SPECIAL",type:"Cheap Hero"},{kind:"SPECIAL",type:"Karama"},{kind:"SPECIAL",type:"Family Atomics"},{kind:"SPECIAL",type:"Hajr"},{kind:"SPECIAL",type:"Truthtrance"},{kind:"SPECIAL",type:"Tleilaxu Ghola"},{kind:"SPECIAL",type:"Weather Control"},{kind:"USELESS"},{kind:"UNKNOWN"}],A=function(e){var a=Object(i.b)(),t=function(){return a(h(e.house))};return n.createElement("div",{className:"modal is-active"},n.createElement("div",{className:"modal-background",onClick:t}),n.createElement("div",{className:"modal-card"},n.createElement("header",{className:"modal-card-head"},n.createElement("p",{className:"modal-card-title"},"Add card to ",o(e.house)),n.createElement("button",{className:"delete",onClick:t})),n.createElement("section",{className:"modal-card-body"},n.createElement("div",{className:"columns is-multiline"},j.map((function(t){return n.createElement("div",{className:"column is-half",onClick:function(){a(v(e.house,t)),a(h(e.house))},style:{cursor:"pointer"}},n.createElement(O,{card:t},n.createElement("button",{className:"button is-success"},"Add to hand")))}))))))},x=function(){var e=Object(i.b)(),a=function(){return e(d())};return n.createElement("div",{className:"modal is-active"},n.createElement("div",{className:"modal-background",onClick:a}),n.createElement("div",{className:"modal-card"},n.createElement("header",{className:"modal-card-head"},n.createElement("p",{className:"modal-card-title"},"Reset the game"),n.createElement("button",{className:"delete",onClick:a})),n.createElement("section",{className:"modal-card-body"},n.createElement("p",{className:"subtitle is-5"},"Are you sure?"),n.createElement("div",{className:"buttons"},n.createElement("button",{className:"button is-danger",onClick:function(){return e(g())}},"Yes"),n.createElement("button",{className:"button is-secondary",onClick:a},"No")))))},W=function(e){var a=Object(i.c)((function(e){return{houses:e.houses,view:e.view}}));if("none"===a.view.active_modal)return null;var t=a.houses[a.view.house_name];switch(a.view.active_modal){case"edit_spice":return n.createElement(y,{house:t.name,spice:t.spice});case"view_cards":return n.createElement(S,{house:t.name,cards:t.cards});case"add_card":return n.createElement(A,{house:t.name});case"reset_game":return n.createElement(x,null);default:return null}},P=function(){var e=Object(i.c)((function(e){return{houses:e.houses}})),a=Object(i.b)(),t=[],c=!0,r=!1,s=void 0;try{for(var o,m=l[Symbol.iterator]();!(c=(o=m.next()).done);c=!0){var d=o.value,u=e.houses[d];void 0!==u&&t.push(n.createElement(C,{house:d,spice:u.spice,key:d,cards:u.cards,karama_used:u.karama_used}))}}catch(h){r=!0,s=h}finally{try{c||null==m.return||m.return()}finally{if(r)throw s}}return n.createElement(n.Fragment,null,n.createElement("section",{className:"section"},n.createElement("div",{className:"container"},n.createElement("div",{className:"columns is-multiline"},t))),n.createElement("section",{className:"section"},n.createElement("div",{className:"container"},n.createElement("div",{className:"buttons"},n.createElement("button",{className:"button is-secondary",onClick:function(){a(f())}},"Reset game")))),n.createElement(W,null))},L=t(8),I=t(16),U=function(e){var a="button";return e.checked&&(a+=" is-primary"),n.createElement("button",{className:a,onClick:e.onClick},n.createElement("div",null,o(e.house)))},F=function(){var e=n.useState({harkonen:!1,emperor:!1,guild:!1,bene:!1,fremen:!1}),a=Object(w.a)(e,2),t=a[0],c=a[1],r=!1,s=!0,o=!1,m=void 0;try{for(var u,h=l[Symbol.iterator]();!(s=(u=h.next()).done);s=!0){var E=u.value;if(t[E]){r=!0;break}}}catch(v){o=!0,m=v}finally{try{s||null==h.return||h.return()}finally{if(o)throw m}}var f=Object(i.b)();return n.createElement(n.Fragment,null,n.createElement("section",{className:"section"},n.createElement("div",{className:"container"},n.createElement("p",{className:"title is-1"},"New game"),n.createElement("p",{className:"subtitle is-5"},"Select which houses are present in the game"))),n.createElement("section",{className:"section"},n.createElement("div",{className:"container"},n.createElement("div",{className:"buttons is-centered"},l.map((function(e){return n.createElement(U,{house:e,checked:t[e],onClick:function(){var a=!t[e];c(Object(I.a)({},t,Object(L.a)({},e,a)))},key:e})}))))),n.createElement("section",{className:"section"},n.createElement("div",{className:"buttons is-centered"},n.createElement("button",{className:"button is-success",disabled:!r,onClick:function(){r&&(f(k(t)),f(d()))}},"Start game"))))},D=function(){return Object(i.c)((function(e){return e.game})).initialized?c.a.createElement(P,null):c.a.createElement(F,null)},K=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function T(e,a){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var R=t(3),z={harkonen:10,atreides:10,fremen:3,bene:5,guild:5,emperor:10},H=Object(m.b)({},(function(e){function a(e,a){var t=a[e];if(void 0===t)throw new Error("House "+e+" not present in this game");return t}e.addCase(v,(function(e,t){a(t.payload.house,e).cards.push(t.payload.card)})),e.addCase(b,(function(e,t){a(t.payload.house,e).cards.splice(t.payload.index,1)})),e.addCase(N,(function(e,t){var n=a(t.payload.house,e);n.spice+=t.payload.spice,n.spice<0&&(n.spice=0)})),e.addCase(k,(function(e,a){var t=!0,n=!1,c=void 0;try{for(var r,s=l[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var i=r.value;if(a.payload[i]){var o={spice:z[i],cards:[{kind:"UNKNOWN"}],name:i,karama_used:!1};"harkonen"===i&&(o.cards.push({kind:"UNKNOWN"}),o.cards.push({kind:"UNKNOWN"})),e[i]=o}else e[i]=void 0}}catch(m){n=!0,c=m}finally{try{t||null==s.return||s.return()}finally{if(n)throw c}}})),e.addCase(p,(function(e,t){var n=a(t.payload,e);n.karama_used=!n.karama_used}))})),B={active_modal:"none",house_name:void 0},G=Object(m.b)(B,(function(e){e.addCase(d,(function(e,a){e.active_modal="none",e.house_name=void 0})),e.addCase(u,(function(e,a){e.active_modal="edit_spice",e.house_name=a.payload})),e.addCase(E,(function(e,a){e.active_modal="add_card",e.house_name=a.payload})),e.addCase(h,(function(e,a){e.active_modal="view_cards",e.house_name=a.payload})),e.addCase(f,(function(e){e.active_modal="reset_game",e.house_name=void 0}))})),J=Object(m.b)({initialized:!1},(function(e){e.addCase(k,(function(e,a){e.initialized=!0})),e.addCase(g,(function(e,a){e.initialized=!1}))})),M=Object(R.combineReducers)({houses:H,view:G,game:J}),Y=t(17),$=t.n(Y),q=Object(R.compose)($()(["houses","game"])),Q={houses:{},view:{active_modal:"none",house_name:void 0},game:{initialized:!1}},V=Object(R.createStore)(M,Q,q);t(37);s.a.render(c.a.createElement(i.a,{store:V},c.a.createElement("section",{className:"hero is-primary"},c.a.createElement("div",{className:"hero-body"},c.a.createElement("div",{className:"container"},c.a.createElement("p",{className:"title is-1"},"Atreides mentat"),c.a.createElement("p",{className:"subtitle is-5"},"for Dune (2018)")))),c.a.createElement(D,null),c.a.createElement("footer",{className:"footer"},"Icons made by"," ",c.a.createElement("a",{href:"https://www.flaticon.com/authors/freepik",title:"Freepik"},"Freepik")," ","from"," ",c.a.createElement("a",{href:"https://www.flaticon.com/",title:"Flaticon"},"www.flaticon.com"))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/atreides_mentat",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var a="".concat("/atreides_mentat","/service-worker.js");K?(!function(e,a){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):T(e,a)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(a,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):T(a,e)}))}}()}},[[18,1,2]]]);
//# sourceMappingURL=main.ce939e5c.chunk.js.map